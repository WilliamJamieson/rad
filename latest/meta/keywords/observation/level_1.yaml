%YAML 1.1
---
$schema: asdf://stsci.edu/datamodels/roman/schemas/rad_schema-1.0.0
id: asdf://stsci.edu/datamodels/roman/schemas/meta/keywords/observation/level_1-1.0.0

title: Level 1 Observation Identifiers

allOf:
  - $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/keywords/observation/shared-1.0.0
  - type: object
    properties:
      observation_id:
        title: Programmatic Observation Identifier
        description: |
          The format of the programmatic observation identifier
          is "PPPPPCCAAASSSOOOVVVggsaaeee" where "PPPPP" is the program
          number, "CC" is the execution plan number, "AAA" is the pass
          number, "SSS" is the segment number, "OOO" is the observation
          number, "VVV" is the visit number, "gg" is the visit file group,
          "s" is the visit file sequence, "aa" is the visit file activity,
          and "eeee" is the exposure number. The observation identifier is
          the complete concatenation of the visit_id +
          visit_file_statement (visit_file_group + visit_file_sequence +
          visit_file_activity) + exposure.
        type: string
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        maxLength: 28
        archive_catalog:
          datatype: nvarchar(28)
          destination: [WFIExposure.observation_id, GuideWindow.observation_id]
      visit_id:
        title: Visit Identifier
        description: |
          A unique identifier for a visit. The format is "PPPPPCCAAASSSOOOVVV" where
          "PPPPP" is the program number, "CC" is the execution plan number, "AAA" is the pass number,
          "SSS" is the segment number, "OOO" is the observation number, and "VVV" is the
          visit number.
        type: string
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        maxLength: 19
        archive_catalog:
          datatype: nvarchar(19)
          destination: [WFIExposure.visit_id, GuideWindow.visit_id]
      program:
        not:
          type: "null"
      execution_plan:
        not:
          type: "null"
      pass:
        not:
          type: "null"
      segment:
        not:
          type: "null"
      observation:
        not:
          type: "null"
      visit:
        not:
          type: "null"
      visit_file_group:
        title: Visit File Group
        description: |
          The visit file group identifies the sequence group
          within the visit file. The allowed range of visit file group
          numbers is 01 to 99 inclusive.
        type: integer
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: smallint
          destination:
            [WFIExposure.visit_file_group, GuideWindow.visit_file_group]
      visit_file_sequence:
        title: Visit File Sequence
        description: |
          The visit file sequence identifies the sequence within
          the visit file group. A value of 1 indicates a prime instrument
          exposure, and a value greater than 1 indicates a parallel
          instrument exposure. The allowed range of visit file sequence
          numbers of 1 to 5 inclusive.
        type: integer
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: tinyint
          destination:
            [WFIExposure.visit_file_sequence, GuideWindow.visit_file_sequence]
      visit_file_activity:
        title: Visit File Activity
        description: |
          The visit file activity number identifies the activity
          within the visit file sequence. The allowed range of visit file
          activity numbers is 01 to 99 inclusive.
        type: string
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        maxLength: 2
        archive_catalog:
          datatype: nvarchar(2)
          destination:
            [WFIExposure.visit_file_activity, GuideWindow.visit_file_activity]
      exposure:
        not:
          type: "null"
    required:
      [
        observation_id,
        visit_id,
        program,
        execution_plan,
        pass,
        segment,
        observation,
        visit,
        visit_file_group,
        visit_file_sequence,
        visit_file_activity,
        exposure,
      ]

flowStyle: block
