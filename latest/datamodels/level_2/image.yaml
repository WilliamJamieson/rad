%YAML 1.1
---
$schema: asdf://stsci.edu/datamodels/roman/schemas/rad_schema-1.0.0
id: asdf://stsci.edu/datamodels/roman/schemas/datamodels/level_2/image-1.0.0

title: Level 2 (L2) Calibrated Roman Wide Field Instrument (WFI) Rate Image.

datamodel_name: ImageModel
archive_meta: None

allOf:
  - $ref: asdf://stsci.edu/datamodels/roman/schemas/data/l2_reference-1.0.0
  - type: object
    properties:
      meta:
        allOf:
          - $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/l2_common-1.0.0
          - type: object
            properties:
              background:
                tag: asdf://stsci.edu/datamodels/roman/tags/meta/keywords/sky_background-1.0.0
              cal_logs:
                tag: asdf://stsci.edu/datamodels/roman/tags/meta/keywords/cal_logs-1.0.0
              outlier_detection:
                tag: asdf://stsci.edu/datamodels/roman/tags/meta/keywords/outlier_detection-1.0.0
              photometry:
                tag: asdf://stsci.edu/datamodels/roman/tags/meta/keywords/photometry-1.0.0
              source_catalog:
                tag: asdf://stsci.edu/datamodels/roman/tags/meta/keywords/source_catalog-1.0.0
              statistics:
                tag: asdf://stsci.edu/datamodels/roman/tags/meta/keywords/statistics-1.0.0
              wcs:
                title: WCS object
                anyOf:
                  - tag: tag:stsci.edu:gwcs/wcs-*
                  - type: "null"

            required: [photometry, wcs]
      data:
        title: Science Data (DN/s) or (MJy/sr)
        description: |
          Calibrated science rate image in units of data numbers
          per second (DN/s) or megaJanskys per steradian (MJy/sr).
        tag: tag:stsci.edu:asdf/core/ndarray-1.*
        datatype: float32
        exact_datatype: true
        ndim: 2
        unit: ["DN / s", "MJy.sr**-1"]
      dq:
        title: Data Quality
        description: |
          Bitwise sum of data quality flags.
        tag: tag:stsci.edu:asdf/core/ndarray-1.*
        datatype: uint32
        exact_datatype: true
        ndim: 2
      err:
        title: Error (DN / s) or (MJy / sr)
        description: |
          Total error array in units of data numbers per second
          (DN/s) or megaJanskys per steradian (MJy/sr).
        tag: tag:stsci.edu:asdf/core/ndarray-1.*
        datatype: float32
        exact_datatype: true
        ndim: 2
        unit: ["DN / s", "MJy.sr**-1"]
      var_poisson:
        title: Poisson Variance (DN^2/s^2) or (MJy^2/sr^2)
        description: |
          Component of the per pixel variance due to Poisson
          noise in units of data numbers squared per second squared
          (DN^2/s^2) or megaJanskys squared per square steradian
          (MJy^2/sr^2).
        tag: tag:stsci.edu:asdf/core/ndarray-1.*
        datatype: float32
        exact_datatype: true
        ndim: 2
        unit: ["DN2 / s2", "MJy**2.sr**-2"]
      var_rnoise:
        title: Read Noise Variance (DN^2/s^2) or (MJy^2/sr^2)
        description: |
          Component of the per pixel variance due to detector
          read noise in units of data numbers squared per second squared
          (DN^2/s^2) or megaJanskys squared per square steradian
          (MJy^2/sr^2).
        tag: tag:stsci.edu:asdf/core/ndarray-1.*
        datatype: float32
        exact_datatype: true
        ndim: 2
        unit: ["DN2 / s2", "MJy**2.sr**-2"]
      var_flat:
        title: Flat Field Variance (DN^2/s^2) or (MJy^2/sr^2)
        description: |
          Component of the per pixel variance due to the flat
          field in units of data numbers squared per second squared
          (DN^2/s^2) or megaJanskys squared per square steradian
          (MJy^2/sr^2).
        tag: tag:stsci.edu:asdf/core/ndarray-1.*
        datatype: float32
        exact_datatype: true
        ndim: 2
        unit: ["DN2 / s2", "MJy**2.sr**-2"]
    propertyOrder: [meta, data, dq, err, var_poisson, var_rnoise, var_flat]
    required: [meta, data, dq, err, var_poisson, var_rnoise]

flowStyle: block
