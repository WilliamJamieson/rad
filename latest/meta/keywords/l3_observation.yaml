%YAML 1.1
---
$schema: asdf://stsci.edu/datamodels/roman/schemas/rad_schema-1.0.0
id: asdf://stsci.edu/datamodels/roman/schemas/meta/keywords/l3_observation-1.0.0

title: Level 3 Observation Identifiers
properties:
  execution_plan:
    title: Execution Plan Number
    description: >
      Identifier for the execution plan. An execution plan
      is a version of the complete set of activities for a survey. A
      survey may include portions of multiple execution plans. A new
      execution plan is required whenever there is a change in the
      program. The allowed range of execution plan numbers is 01 to 99
      inclusive.
    anyOf:
      - type: integer
      - type: "null"
    archive_catalog:
      datatype: smallint
      destination: [WFIMosaic.execution_plan]
  exposure:
    title: Exposure Number
    description: |
      An exposure is a single multi-accumulation (MA) table
      sequence of the detector array at a single dither point in the
      dither pattern. The allowed range of exposure numbers is 0001 to
      9999 inclusive.
    anyOf:
      - type: integer
      - type: "null"
    archive_catalog:
      datatype: smallint
      destination: [WFIMosaic.exposure]
  exposure_grouping:
    title: Exposure Grouping
    description: >
      Conceptual type of exposure grouping used to create this coadd (e.g., by visit, or full)
    anyOf:
      - type: string
        maxLength: 120
      - type: "null"
    archive_catalog:
      datatype: nvarchar(120)
      destination: [WFIMosaic.exposure_grouping]
  observation:
    title: Observation Number
    description: |
      Identifier for the observation. An observation is a
      single traversal of a mosaic pattern, using a single, constant
      instrument configuration (i.e., with no element wheel moves).
      The allowed range of observation numbers is 001 to 999
      inclusive.
    anyOf:
      - type: integer
      - type: "null"
    archive_catalog:
      datatype: smallint
      destination: [WFIMosaic.observation]
  pass:
    title: Pass Number
    description: >
      Identifier for the pass. A pass is the collection of
      activities generated from each iteration of a pass plan in the
      Astronomer's Proposal Tool (APT). Multiple passes may be
      generated from the same Pass Plan to allow repetition or execute
      at different orientations (via special requirements). The
      allowed range of pass numbers is 001 to 999 inclusive.
    anyOf:
      - type: integer
      - type: "null"
    archive_catalog:
      datatype: smallint
      destination: [WFIMosaic.pass]
  program:
    title: Program Number
    description: >
      Identifier for the observing program. A program is an
      approved specification for a science, calibration, or
      engineering investigation to be pursued using Roman Space
      Telescope mission resources. The allowed range of program
      numbers is 00001 to 18445 inclusive.
    anyOf:
      - type: integer
      - type: "null"
    archive_catalog:
      datatype: int
      destination: [WFIMosaic.program]
  segment:
    title: Segment Number
    description: >
      Identifier for the segment. A segment is the sequence
      of activities produced by each iteration of an Astronomer's
      Proposal Tool (APT) segment plan in a pass. A segment may
      include multiple traversals of mosaic pattern(s), with element
      wheel moves occurring between observations. The allowed range of
      segment numbers is 001 to 999 inclusive.
    anyOf:
      - type: integer
      - type: "null"
    archive_catalog:
      datatype: smallint
      destination: [WFIMosaic.segment]
  visit:
    title: Visit Number
    description: >
      A visit is the smallest scheduling unit for Roman,
      which is a sequence of exposures executed without interruption,
      including dither patterns. A visit corresponds to one tile of
      the selected mosaic pattern. The allowed range of visit numbers
      is 001 to 999 inclusive.
    anyOf:
      - type: integer
      - type: "null"
    archive_catalog:
      datatype: smallint
      destination: [WFIMosaic.visit]
required:
  [
    execution_plan,
    exposure,
    exposure_grouping,
    observation,
    pass,
    program,
    segment,
    visit,
  ]

flowStyle: block
